<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PilotStay Host Dashboard (Slim)</title>
  <style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:#09090b;color:#fafafa;min-height:100vh}
.loading-screen{position:fixed;inset:0;background:#09090b;display:flex;align-items:center;justify-content:center;z-index:9999;flex-direction:column;gap:16px}
.spinner{width:48px;height:48px;border:3px solid #27272a;border-top-color:#f97316;border-radius:50%;animation:spin .8s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.pulse{animation:pulse 2s infinite}
@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}

/* Tutorial - Interactive Spotlight with Agent Avatar */
#tutorial-overlay{position:fixed;inset:0;z-index:5000}
#tutorial-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0);z-index:5001;transition:background .3s}
#tutorial-backdrop.active{background:rgba(0,0,0,.55)}
#tutorial-spotlight{position:absolute;z-index:5002;border-radius:8px;box-shadow:0 0 0 9999px rgba(0,0,0,.6), 0 0 0 4px rgba(139,92,246,0.8), 0 0 30px rgba(139,92,246,.6), 0 0 60px rgba(139,92,246,.3);transition:all .4s ease;pointer-events:none;background:rgba(255,255,255,0.03)}
#tutorial-tooltip{position:fixed;z-index:5003;background:linear-gradient(145deg,#1a1a1f,#131316);border:1px solid rgba(139,92,246,0.5);border-radius:12px;padding:0;width:420px;max-width:90vw;animation:tutorialFadeIn .4s ease;box-shadow:0 20px 60px rgba(0,0,0,.6),0 0 40px rgba(139,92,246,0.15);overflow:hidden}
#tutorial-tooltip::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,#8b5cf6,#f97316,#8b5cf6);background-size:200% 100%;animation:gradientMove 3s ease infinite}
@keyframes gradientMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.tutorial-agent-header{display:flex;align-items:center;gap:14px;padding:20px 24px;background:linear-gradient(135deg,rgba(139,92,246,0.1),rgba(249,115,22,0.05));border-bottom:1px solid #27272a}
.tutorial-agent-avatar{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,#8b5cf6,#7c3aed);display:flex;align-items:center;justify-content:center;font-size:26px;box-shadow:0 4px 16px rgba(139,92,246,0.4);animation:avatarPulse 2s ease-in-out infinite;flex-shrink:0}
@keyframes avatarPulse{0%,100%{box-shadow:0 4px 16px rgba(139,92,246,0.4)}50%{box-shadow:0 4px 24px rgba(139,92,246,0.6),0 0 30px rgba(139,92,246,0.3)}}
.tutorial-agent-info{flex:1}
.tutorial-agent-name{font-size:15px;font-weight:700;color:#fafafa;display:flex;align-items:center;gap:8px}
.tutorial-agent-badge{font-size:9px;padding:3px 8px;background:linear-gradient(135deg,#8b5cf6,#7c3aed);border-radius:4px;text-transform:uppercase;letter-spacing:0.5px}
.tutorial-agent-status{font-size:11px;color:#a1a1aa;margin-top:3px;display:flex;align-items:center;gap:6px}
.tutorial-agent-status::before{content:'';width:7px;height:7px;background:#22c55e;border-radius:50%;animation:statusBlink 2s ease infinite}
@keyframes statusBlink{0%,100%{opacity:1}50%{opacity:0.5}}
.tutorial-content{padding:20px 24px}
.tutorial-desc.typing .typing-cursor{display:inline-block;width:2px;height:14px;background:#8b5cf6;margin-left:2px;animation:cursorBlink .8s infinite}
@keyframes cursorBlink{0%,50%{opacity:1}51%,100%{opacity:0}}
.tutorial-actions.hidden{opacity:0;pointer-events:none}
.tutorial-actions{transition:opacity .3s ease}
@keyframes tutorialFadeIn{from{opacity:0;transform:scale(.95) translateY(10px)}to{opacity:1;transform:scale(1) translateY(0)}}
@keyframes tutorialPulse{0%,100%{box-shadow:0 0 0 9999px rgba(0,0,0,.6), 0 0 0 4px rgba(139,92,246,0.8), 0 0 30px rgba(139,92,246,.6)}50%{box-shadow:0 0 0 9999px rgba(0,0,0,.6), 0 0 0 6px rgba(139,92,246,1), 0 0 50px rgba(139,92,246,.8)}}
#tutorial-spotlight.pulse{animation:tutorialPulse 2s infinite}
#tutorial-arrow{position:absolute;width:0;height:0;border:10px solid transparent}
#tutorial-arrow.left{right:100%;top:50px;border-right-color:rgba(139,92,246,0.5)}
#tutorial-arrow.right{left:100%;top:50px;border-left-color:rgba(139,92,246,0.5)}
#tutorial-arrow.top{bottom:100%;left:24px;border-bottom-color:rgba(139,92,246,0.5)}
#tutorial-arrow.bottom{top:100%;left:24px;border-top-color:rgba(139,92,246,0.5)}
#tutorial-arrow.hidden{display:none}
.tutorial-header{display:flex;align-items:center;gap:10px;margin-bottom:12px}
.tutorial-icon{font-size:28px;line-height:1;background:linear-gradient(135deg,#27272a,#1f1f23);padding:10px;border-radius:8px}
.tutorial-step-label{font-size:10px;color:#8b5cf6;font-weight:600;text-transform:uppercase;letter-spacing:1px}
.tutorial-title{font-size:17px;font-weight:700;margin-bottom:10px;color:#fafafa;line-height:1.3}
.tutorial-desc{color:#d4d4d8;font-size:13px;line-height:1.7;margin-bottom:20px}
.tutorial-desc strong{color:#f97316;font-weight:600}
.tutorial-desc br{display:block;margin:8px 0}
/* Progress Bar statt Dots */
.tutorial-progress{margin-bottom:18px}
.tutorial-progress-bar{width:100%;height:6px;background:#27272a;border-radius:3px;overflow:hidden}
.tutorial-progress-fill{height:100%;background:linear-gradient(90deg,#8b5cf6,#a78bfa);border-radius:3px;transition:width .4s ease;box-shadow:0 0 10px rgba(139,92,246,0.5)}
.tutorial-progress-text{font-size:11px;color:#71717a;text-align:center;margin-top:6px}
.tutorial-actions{display:flex;gap:10px;align-items:center;padding-top:6px;border-top:1px solid #27272a}
.tutorial-skip{background:none;border:none;color:#71717a;font-size:12px;cursor:pointer;padding:10px 16px;transition:all .2s;border-radius:6px}
.tutorial-skip:hover{color:#fafafa;background:#27272a}
.tutorial-next{flex:1;padding:14px 24px;background:linear-gradient(135deg,#8b5cf6,#7c3aed);border:none;border-radius:8px;color:#fff;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:8px}
.tutorial-next:hover{transform:scale(1.02);box-shadow:0 6px 20px rgba(139,92,246,.4)}
.tutorial-next::after{content:'';display:inline-block;width:0;height:0;border-top:5px solid transparent;border-bottom:5px solid transparent;border-left:6px solid #fff;margin-left:4px}
.tutorial-highlight{position:relative;z-index:5002;box-shadow:0 0 0 3px rgba(139,92,246,0.6),0 0 20px rgba(139,92,246,0.4),0 0 40px rgba(139,92,246,0.2);border-radius:8px;animation:tutorial-pulse 1.5s ease-in-out infinite}
@keyframes tutorial-pulse{0%,100%{box-shadow:0 0 0 3px rgba(139,92,246,0.6),0 0 20px rgba(139,92,246,0.4),0 0 40px rgba(139,92,246,0.2)}50%{box-shadow:0 0 0 5px rgba(139,92,246,0.8),0 0 30px rgba(139,92,246,0.5),0 0 50px rgba(139,92,246,0.3)}}
/* Typing animation for agent messages */
.tutorial-typing{display:inline-flex;gap:4px;padding:4px 0}
.tutorial-typing span{width:6px;height:6px;background:#8b5cf6;border-radius:50%;animation:typing 1.4s infinite both}
.tutorial-typing span:nth-child(2){animation-delay:0.2s}
.tutorial-typing span:nth-child(3){animation-delay:0.4s}
@keyframes typing{0%,80%,100%{transform:scale(0.6);opacity:0.5}40%{transform:scale(1);opacity:1}}
.feature-flip-inner.flipped{transform:rotateY(180deg)}

/* Sidebar */
.sidebar{width:260px;background:#131316;border-right:1px solid #27272a;position:fixed;height:100vh;display:flex;flex-direction:column;z-index:100}
.sidebar-header{height:76px;padding:16px 20px;border-bottom:1px solid #27272a;display:flex;align-items:center}
.sidebar-logo{width:44px;height:44px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:22px;background:#18181b}
.sidebar-title{font-weight:700;font-size:18px}
.sidebar-sub{font-size:11px;color:#f97316}
.nav{flex:1;padding:16px;overflow-y:auto;scrollbar-width:none;-ms-overflow-style:none}
.nav::-webkit-scrollbar{display:none}
.nav-section{font-size:10px;color:#52525b;text-transform:uppercase;letter-spacing:1px;padding:12px 14px 8px}
.nav-item{display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:6px;cursor:pointer;color:#a1a1aa;margin-bottom:4px;transition:all .2s;font-size:13px;position:relative}
.nav-item:hover{background:#1f1f23;color:#fafafa}
.nav-item.active{background:#f9731620;color:#f97316}
.nav-icon{font-size:18px;width:24px;text-align:center}
.nav-badge{position:absolute;right:12px;min-width:20px;height:20px;background:#ef4444;border-radius:4px;font-size:10px;color:#fff;display:flex;align-items:center;justify-content:center}
.user-section{padding:16px;border-top:1px solid #27272a}
.user-card{display:flex;align-items:center;gap:12px;padding:12px;background:#18181b;border-radius:8px;margin-bottom:12px}
.user-avatar{width:40px;height:40px;background:linear-gradient(135deg,#f97316,#fb923c);border-radius:6px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px}
.user-name{font-size:14px;font-weight:600}
.user-plan{font-size:11px;color:#a1a1aa}
.logout-btn{width:100%;padding:10px;background:#27272a;border:none;border-radius:6px;color:#a1a1aa;font-size:12px;cursor:pointer}
.logout-btn:hover{background:#3f3f46;color:#fafafa}

/* Plan Cards */
.plan-card{transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1)}
.plan-card:hover{transform:translateY(-4px)}

/* Main */
.main{margin-left:260px;min-height:100vh}
.header{padding:24px 32px;border-bottom:1px solid #27272a;display:flex;justify-content:space-between;align-items:center;background:#09090b;position:sticky;top:0;z-index:50}
.header-title{font-size:24px;font-weight:700}
.header-subtitle{color:#71717a;font-size:13px;margin-top:4px}
.content{padding:32px}

/* ==================== MESSAGES MODULE CSS ==================== */
.messages-container{display:flex !important;flex-direction:row !important;flex-wrap:nowrap !important;gap:16px;height:calc(100vh - 200px);min-height:500px;max-height:800px;width:100%}
.messages-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:500px;text-align:center}
.messages-empty-icon{font-size:64px;margin-bottom:16px}
.messages-empty-title{font-size:18px;font-weight:700;margin-bottom:8px}
.messages-empty-text{color:#a1a1aa;margin-bottom:24px}

/* Chat List (Left Column) */
.chat-list{width:320px !important;min-width:320px !important;max-width:320px !important;flex-shrink:0 !important;flex-grow:0 !important;background:#18181b;border-radius:8px;border:1px solid #27272a;display:flex;flex-direction:column;overflow:hidden;height:100%}
.chat-list-header{padding:14px 16px;border-bottom:1px solid #27272a;display:flex;justify-content:space-between;align-items:center;flex-shrink:0}
.chat-list-title{font-weight:600;font-size:14px}
.chat-list-actions{display:flex;gap:8px;align-items:center}
.chat-list-items{flex:1;overflow-y:auto;padding:8px}
.chat-list-item{display:flex;gap:12px;padding:12px;border-radius:6px;cursor:pointer;margin-bottom:4px;border-left:3px solid transparent;transition:all 0.15s ease}
.chat-list-item:hover{background:#27272a}
.chat-list-item-active{background:#27272a;border-left-color:#f97316}
.chat-list-avatar{width:40px;height:40px;border-radius:6px;background:linear-gradient(135deg,#ea580c,#f97316);display:flex;align-items:center;justify-content:center;font-weight:600;color:#fff;flex-shrink:0;font-size:14px}
.chat-list-info{flex:1;min-width:0;overflow:hidden}
.chat-list-name{font-weight:600;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chat-list-property{font-size:10px;color:#71717a;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chat-list-preview{font-size:11px;color:#71717a;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:2px}
.chat-unread-badge{background:#f97316;color:#fff;font-size:10px;font-weight:600;padding:2px 6px;border-radius:4px;flex-shrink:0}

/* Chat Window (Right Column) */
.chat-window{flex:1 1 auto !important;min-width:0 !important;background:#18181b;border-radius:8px;border:1px solid #27272a;display:flex;flex-direction:column;overflow:hidden;height:100%}
.chat-window-empty{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center}
.chat-window-empty-icon{font-size:48px;margin-bottom:12px;opacity:0.5}
.chat-window-empty-text{color:#71717a}
.chat-window-header{padding:14px 16px;border-bottom:1px solid #27272a;display:flex;align-items:center;gap:12px;flex-shrink:0}
.chat-header-avatar{width:44px;height:44px;border-radius:6px;background:linear-gradient(135deg,#ea580c,#f97316);display:flex;align-items:center;justify-content:center;font-weight:600;color:#fff;flex-shrink:0}
.chat-header-info{flex:1;min-width:0}
.chat-header-name{font-weight:600;font-size:15px}
.chat-header-property{font-size:11px;color:#71717a}

/* Messages Area */
.chat-messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px}
.chat-no-messages{color:#71717a;text-align:center;padding:40px}
.chat-message{display:flex;flex-direction:column;max-width:75%}
.chat-message-left{align-self:flex-start}
.chat-message-right{align-self:flex-end}
.chat-message-meta{font-size:10px;color:#71717a;margin-bottom:4px}
.chat-message-right .chat-message-meta{text-align:right}
.chat-bubble{padding:12px 16px;border-radius:8px;font-size:13px;line-height:1.5;word-wrap:break-word}
.bubble-guest{background:#27272a;border:1px solid #3f3f46;border-radius:4px 8px 8px 8px}
.bubble-host{background:linear-gradient(135deg,#ea580c,#f97316);border-radius:8px 8px 4px 8px}
.bubble-ai{background:linear-gradient(135deg,#7c3aed,#8b5cf6);border-radius:8px 8px 4px 8px}

/* Smart Replies */
.smart-replies{padding:12px 16px;border-top:1px solid #27272a;background:#1a1a1e;flex-shrink:0}
.smart-replies-label{font-size:11px;color:#71717a;margin-bottom:8px}
.smart-replies-buttons{display:flex;flex-wrap:wrap;gap:8px}
.smart-reply-btn{background:#27272a;border:1px solid #3f3f46;padding:8px 14px;border-radius:20px;font-size:12px;cursor:pointer;color:#fafafa;transition:all 0.15s ease}
.smart-reply-btn:hover{background:#3f3f46;border-color:#52525b}

/* Input Area */
.chat-input-area{padding:14px 16px;border-top:1px solid #27272a;display:flex;gap:10px;align-items:center;flex-shrink:0;background:#18181b}
.chat-input{flex:1;background:#27272a;border:1px solid #3f3f46;border-radius:8px;padding:10px 14px;color:#fafafa;font-size:14px}
.chat-input:focus{outline:none;border-color:#f97316}
.chat-input::placeholder{color:#71717a}
.btn-icon{padding:8px 10px;background:#27272a;border:1px solid #3f3f46;border-radius:8px;cursor:pointer;font-size:14px}
.btn-icon:hover{background:#3f3f46}
.btn-icon-only{width:44px;height:44px;display:flex;align-items:center;justify-content:center}
/* ==================== END MESSAGES CSS ==================== */

/* Cards */
.card{background:#131316;border:1px solid #27272a;border-radius:8px;padding:20px;margin-bottom:16px;transition:all .2s}
.card:hover{border-color:#3f3f46}
.card-title{font-size:14px;font-weight:600;margin-bottom:16px;display:flex;align-items:center;gap:10px}
.card-ai{background:linear-gradient(135deg,#131316,#1a1a2e);border-color:#8b5cf650}
.property-card{display:flex;flex-direction:column;min-height:240px}
.property-card:hover{border-color:#f97316;box-shadow:0 4px 20px rgba(249,115,22,.1)}

/* Stats */
.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}
.stat-card{background:#131316;border:1px solid #27272a;border-radius:8px;padding:24px;text-align:center}
.stat-icon{font-size:28px;margin-bottom:12px}
.stat-value{font-size:32px;font-weight:700}
.stat-label{font-size:12px;color:#71717a;margin-top:6px}
.stat-change{font-size:11px;margin-top:8px;padding:4px 8px;border-radius:4px;display:inline-block}
.stat-change.up{background:#22c55e20;color:#22c55e}
.stat-change.down{background:#ef444420;color:#ef4444}

/* Grids */
.grid-2{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}

/* Buttons */
.btn{padding:12px 20px;border:none;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;gap:8px;transition:all .2s}
.btn:hover{transform:scale(1.01)}
.btn-primary{background:linear-gradient(135deg,#f97316,#fb923c);color:#fff}
.btn-success{background:linear-gradient(135deg,#22c55e,#16a34a);color:#fff}
.btn-secondary{background:#27272a;color:#fafafa;border:1px solid #3f3f46}
.btn-ai{background:linear-gradient(135deg,#8b5cf6,#a78bfa);color:#fff}
.btn-sm{padding:8px 14px;font-size:12px}

/* Inputs */
.input{width:100%;padding:14px 16px;background:#18181b;border:1px solid #27272a;border-radius:6px;color:#fafafa;font-size:14px;transition:all .2s}
.input:focus{outline:none;border-color:#f97316}
.input::placeholder{color:#52525b}
.label{display:block;font-size:12px;color:#a1a1aa;margin-bottom:8px}
.select{width:100%;padding:14px 16px;background:#18181b;border:1px solid #27272a;border-radius:6px;color:#fafafa;font-size:14px}

/* Tags */
.tag{padding:4px 12px;border-radius:4px;font-size:11px;font-weight:600}
.tag-green{background:#22c55e20;color:#22c55e}
.tag-orange{background:#f9731620;color:#f97316}
.tag-blue{background:#3b82f620;color:#3b82f6}
.tag-purple{background:#8b5cf620;color:#8b5cf6}
.tag-red{background:#ef444420;color:#ef4444}

/* Lists */
.list-item{display:flex;align-items:center;gap:16px;padding:16px;background:#18181b;border-radius:8px;margin-bottom:10px;transition:all .2s}
.list-item:hover{background:#1f1f23}
.list-icon{font-size:28px}
.list-info{flex:1}
.list-title{font-weight:600;font-size:14px}
.list-subtitle{font-size:12px;color:#71717a;margin-top:2px}

/* Empty State */
.empty-state{text-align:center;padding:60px 20px;color:#71717a}
.empty-icon{font-size:56px;margin-bottom:16px}
.empty-title{font-size:16px;font-weight:600;color:#fafafa;margin-bottom:8px}
.empty-desc{font-size:13px;margin-bottom:20px}

/* Modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px}
.modal{background:#131316;border:1px solid #27272a;border-radius:8px;padding:28px;width:100%;max-width:500px;max-height:90vh;overflow-y:auto}
.modal-title{font-size:18px;font-weight:700;margin-bottom:20px;display:flex;align-items:center;gap:10px}

/* Table */
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:14px 16px;text-align:left;border-bottom:1px solid #27272a}
.table th{font-size:11px;color:#71717a;text-transform:uppercase}
.table tr:hover td{background:#18181b}

/* Chat */
.chat-container{display:grid;grid-template-columns:280px 1fr;gap:20px;height:calc(100vh - 200px)}
.chat-list{background:#131316;border:1px solid #27272a;border-radius:8px;overflow:hidden;display:flex;flex-direction:column}
.chat-list-header{padding:16px;border-bottom:1px solid #27272a;font-weight:600}
.chat-list-items{flex:1;overflow-y:auto}
.chat-item{display:flex;align-items:center;gap:12px;padding:14px 16px;cursor:pointer;border-bottom:1px solid #27272a20;transition:all .2s}
.chat-item:hover,.chat-item.active{background:#1f1f23}
.chat-item.active{border-left:3px solid #f97316}
.chat-avatar{width:40px;height:40px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px}
.chat-preview{flex:1;min-width:0}
.chat-name{font-weight:600;font-size:13px;margin-bottom:2px}
.chat-last{font-size:11px;color:#71717a;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chat-time{font-size:10px;color:#52525b}
.chat-unread{min-width:20px;height:20px;background:#ef4444;border-radius:4px;font-size:10px;color:#fff;display:flex;align-items:center;justify-content:center}
.chat-window{background:#131316;border:1px solid #27272a;border-radius:8px;display:flex;flex-direction:column;max-height:calc(100vh - 200px)}
.chat-header{padding:16px 20px;border-bottom:1px solid #27272a;display:flex;align-items:center;gap:12px;flex-shrink:0}
.chat-messages{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:12px;min-height:200px;max-height:450px}
.message{max-width:75%;display:flex;flex-direction:column}
.message.sent{align-self:flex-end;align-items:flex-end}
.message.received{align-self:flex-start;align-items:flex-start}
.message-sender{font-size:10px;font-weight:600;margin-bottom:4px;padding:0 4px}
.message.sent .message-sender{color:#f97316}
.message.received .message-sender{color:#22c55e}
.message-bubble{padding:12px 16px;border-radius:8px;font-size:14px;line-height:1.5;word-wrap:break-word}
.message.sent .message-bubble{background:linear-gradient(135deg,#f97316,#fb923c);color:#fff;border-bottom-right-radius:4px}
.message.received .message-bubble{background:#27272a;color:#fafafa;border-bottom-left-radius:4px}
.message-ai .message-bubble{background:linear-gradient(135deg,#8b5cf6,#a78bfa);color:#fff}
.message-time{font-size:10px;color:#52525b;margin-top:4px;padding:0 4px}
.chat-input{padding:16px;border-top:1px solid #27272a;display:flex;gap:12px;flex-shrink:0}
.chat-input input{flex:1}
.smart-replies{padding:12px 16px;border-top:1px solid #27272a;background:#18181b;flex-shrink:0;max-height:120px;overflow-y:auto}
.smart-replies-title{font-size:11px;color:#8b5cf6;margin-bottom:8px;display:flex;align-items:center;gap:6px}
.smart-reply-btn{padding:8px 14px;background:#27272a;border:1px solid #3f3f46;border-radius:6px;color:#fafafa;font-size:12px;cursor:pointer;margin-right:8px;margin-bottom:8px;transition:all .2s}
.smart-reply-btn:hover{background:#8b5cf620;border-color:#8b5cf6}


/* Reviews */
.review-card{background:#18181b;border-radius:12px;padding:20px;margin-bottom:16px}
.review-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.review-avatar{width:44px;height:44px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;background:linear-gradient(135deg,#3b82f6,#60a5fa)}
.review-info{flex:1}
.review-name{font-weight:600;font-size:14px}
.review-meta{font-size:11px;color:#71717a;margin-top:2px}
.review-stars{color:#fbbf24}
.review-text{font-size:14px;line-height:1.6;margin-bottom:16px}
.review-reply{background:#131316;border-radius:10px;padding:14px;margin-top:12px}
.review-reply-label{font-size:11px;color:#71717a;margin-bottom:6px}
.ai-suggestion{background:linear-gradient(135deg,#8b5cf620,#8b5cf610);border:1px solid #8b5cf640;border-radius:12px;padding:16px;margin-top:12px}
.ai-suggestion-header{font-size:12px;color:#8b5cf6;margin-bottom:8px;display:flex;align-items:center;gap:6px}
.ai-suggestion-text{font-size:13px;line-height:1.6;margin-bottom:12px}

/* Pricing */
.pricing-card{background:#18181b;border-radius:12px;padding:20px}
.pricing-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.pricing-property{font-weight:600;font-size:16px}
.pricing-current{font-size:24px;font-weight:700}
.pricing-suggestion{display:flex;align-items:center;gap:12px;padding:16px;background:linear-gradient(135deg,#22c55e10,#22c55e05);border:1px solid #22c55e40;border-radius:10px;margin-top:12px}
.pricing-arrow{font-size:24px}
.pricing-new{font-size:28px;font-weight:700;color:#22c55e}
.pricing-reason{font-size:12px;color:#a1a1aa;margin-top:4px}
.pricing-factors{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
.pricing-calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-top:16px}
.cal-header{font-size:10px;color:#71717a;text-align:center;padding:8px}
.cal-day{aspect-ratio:1;border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:12px;cursor:pointer;transition:all .2s}
.cal-day:hover{background:#27272a}
.cal-day.low{background:#22c55e20;color:#22c55e}
.cal-day.medium{background:#f9731620;color:#f97316}
.cal-day.high{background:#ef444420;color:#ef4444}
.cal-day .cal-price{font-size:9px;margin-top:2px}

/* Toggle */
.toggle{width:48px;height:26px;border-radius:13px;background:#27272a;border:none;cursor:pointer;position:relative;transition:all .2s}
.toggle.active{background:#22c55e}
.toggle-knob{width:20px;height:20px;border-radius:50%;background:#fff;position:absolute;top:3px;left:3px;transition:all .2s}
.toggle.active .toggle-knob{left:25px}

/* Responsive */
@media(max-width:1200px){.stats-grid{grid-template-columns:repeat(2,1fr)}.chat-container{grid-template-columns:1fr}}
@media(max-width:900px){.grid-2,.grid-3{grid-template-columns:1fr}}
@media(max-width:768px){.sidebar{display:none}.main{margin-left:0}}
</style>

  <!-- Supabase JS (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
  <!-- AUTH OVERLAY (replaces auth.html redirect) -->
  <div id="authOverlay" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.55); z-index:9999; padding:24px; overflow:auto;">
    <div style="max-width:420px; margin:8vh auto; background:var(--card-bg, #121319); border:1px solid var(--border, rgba(255,255,255,.08)); border-radius:16px; padding:20px;">
      <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:12px;">
        <div style="font-size:18px; font-weight:700;">PilotStay Login</div>
        <div id="authStatus" style="font-size:12px; opacity:.8;"></div>
      </div>

      <div style="display:flex; flex-direction:column; gap:10px;">
        <input id="authEmail" placeholder="E-Mail" autocomplete="username" style="padding:12px; border-radius:12px; border:1px solid var(--border, rgba(255,255,255,.08)); background:rgba(255,255,255,.02); color:inherit;">
        <input id="authPassword" type="password" placeholder="Passwort" autocomplete="current-password" style="padding:12px; border-radius:12px; border:1px solid var(--border, rgba(255,255,255,.08)); background:rgba(255,255,255,.02); color:inherit;">
        <input id="authOrgId" placeholder="org_id (optional, wird gespeichert)" style="padding:12px; border-radius:12px; border:1px solid var(--border, rgba(255,255,255,.08)); background:rgba(255,255,255,.02); color:inherit;">
        <button id="authLoginBtn" type="button" style="padding:12px; border-radius:12px; border:0; cursor:pointer; background:var(--accent, #f36); color:white; font-weight:700;">Einloggen</button>

        <div style="font-size:12px; opacity:.75; line-height:1.35;">
          Hinweis: Diese Slim-Version nutzt dein neues Backend (Edge Function <b>api-dashboard</b>) und verhindert die Redirect-Login-Schleife,
          indem <b>auth.html</b> nicht mehr ben√∂tigt wird.
        </div>

        <div id="authError" style="display:none; font-size:12px; color:#ff6b6b; white-space:pre-wrap;"></div>
      </div>
    </div>
  </div>

  <!-- APP SHELL -->
  <div class="container">
    <div class="sidebar">
      <div class="logo">
        <div class="logo-icon">P</div>
        <div class="logo-text">PilotStay</div>
      </div>

      <div class="nav-menu">
        <div class="nav-item active" data-view="conversations">
          <span class="nav-icon">üí¨</span>
          <span>Conversations</span>
        </div>
        <div class="nav-item" data-view="properties">
          <span class="nav-icon">üè†</span>
          <span>Properties</span>
        </div>
        <div class="nav-item" data-view="bookings">
          <span class="nav-icon">üìÖ</span>
          <span>Bookings</span>
        </div>
        <div class="nav-item" data-view="tutorial">
          <span class="nav-icon">üéì</span>
          <span>Tutorial</span>
        </div>
        <div class="nav-item" data-view="settings">
          <span class="nav-icon">‚öôÔ∏è</span>
          <span>Settings</span>
        </div>
      </div>

      <div class="sidebar-footer">
        <div style="display:flex; gap:10px; align-items:center;">
          <div style="flex:1; font-size:12px; opacity:.8;">
            <div id="whoami">Nicht eingeloggt</div>
            <div id="orgLine" style="opacity:.7;"></div>
          </div>
          <button id="logoutBtn" class="btn btn-secondary" style="padding:8px 10px;">Logout</button>
        </div>
      </div>
    </div>

    <div class="main">
      <div class="header">
        <div class="header-left">
          <div class="page-title" id="pageTitle">Conversations</div>
          <div class="page-subtitle" id="pageSubtitle">Live aus dem Backend (api-dashboard)</div>
        </div>
        <div class="header-right">
          <button id="refreshBtn" class="btn">Refresh</button>
        </div>
      </div>

      <div class="content">
        <!-- Conversations -->
        <div id="view-conversations" class="view">
          <div class="grid grid-2">
            <div class="card">
              <div class="card-header">
                <div class="card-title">Inbox</div>
                <div class="card-subtitle" id="convMeta">‚Äî</div>
              </div>
              <div class="card-content" style="padding:0;">
                <div id="convList" style="max-height:70vh; overflow:auto;"></div>
              </div>
            </div>

            <div class="card">
              <div class="card-header">
                <div class="card-title">Conversation</div>
                <div class="card-subtitle" id="convDetailMeta">W√§hle eine Konversation</div>
              </div>
              <div class="card-content">
                <div id="messages" style="display:flex; flex-direction:column; gap:10px; max-height:62vh; overflow:auto;"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Properties -->
        <div id="view-properties" class="view" style="display:none;">
          <div class="card">
            <div class="card-header">
              <div class="card-title">Properties</div>
              <div class="card-subtitle">GET /properties</div>
            </div>
            <div class="card-content">
              <pre id="propertiesOut" style="white-space:pre-wrap; font-size:12px;"></pre>
            </div>
          </div>
        </div>

        <!-- Bookings -->
        <div id="view-bookings" class="view" style="display:none;">
          <div class="card">
            <div class="card-header">
              <div class="card-title">Bookings</div>
              <div class="card-subtitle">GET /bookings</div>
            </div>
            <div class="card-content">
              <pre id="bookingsOut" style="white-space:pre-wrap; font-size:12px;"></pre>
            </div>
          </div>
        </div>

        <!-- Tutorial -->
        <div id="view-tutorial" class="view" style="display:none;">
          <div class="card">
            <div class="card-header">
              <div class="card-title">Tutorial</div>
              <div class="card-subtitle">UI bleibt, Logik ist server-side</div>
            </div>
            <div class="card-content" style="line-height:1.55;">
              <ol style="padding-left:18px; display:flex; flex-direction:column; gap:8px;">
                <li>Einloggen (JWT Session wird lokal gespeichert).</li>
                <li>Conversations: Liste kommt von <code>/conversations</code> inkl. <code>messages_preview</code>.</li>
                <li>Detail: Klick auf eine Konversation l√§dt <code>/conversations/&lt;booking_id&gt;?include=messages</code>.</li>
                <li>Properties & Bookings zeigen Roh-JSON zum Debuggen.</li>
              </ol>
              <div style="margin-top:12px; font-size:12px; opacity:.75;">
                N√§chster Schritt (Backend): AI/Rules als separate Module anbinden ‚Äî aber das UI h√§ngt schon jetzt am stabilen API-Layer.
              </div>
            </div>
          </div>
        </div>

        <!-- Settings -->
        <div id="view-settings" class="view" style="display:none;">
          <div class="card">
            <div class="card-header">
              <div class="card-title">Settings</div>
              <div class="card-subtitle">Connection</div>
            </div>
            <div class="card-content" style="display:flex; flex-direction:column; gap:10px;">
              <label style="font-size:12px; opacity:.8;">SUPABASE_URL</label>
              <input id="setSupabaseUrl" placeholder="https://xxxx.supabase.co" style="padding:12px; border-radius:12px; border:1px solid var(--border, rgba(255,255,255,.08)); background:rgba(255,255,255,.02); color:inherit;">
              <label style="font-size:12px; opacity:.8;">SUPABASE_ANON_KEY</label>
              <input id="setSupabaseAnon" placeholder="eyJhbGciOi..." style="padding:12px; border-radius:12px; border:1px solid var(--border, rgba(255,255,255,.08)); background:rgba(255,255,255,.02); color:inherit;">
              <label style="font-size:12px; opacity:.8;">ORG_ID</label>
              <input id="setOrgId" placeholder="uuid" style="padding:12px; border-radius:12px; border:1px solid var(--border, rgba(255,255,255,.08)); background:rgba(255,255,255,.02); color:inherit;">

              <div style="display:flex; gap:10px; margin-top:8px;">
                <button id="saveSettingsBtn" class="btn">Save</button>
                <button id="systemCheckBtn" class="btn btn-secondary">System Check (JWT)</button>
              </div>

              <pre id="settingsOut" style="white-space:pre-wrap; font-size:12px; opacity:.9;"></pre>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

<script>
(() => {
  // ---------- Storage keys ----------
  const K_URL = "pilotstay_supabase_url";
  const K_ANON = "pilotstay_supabase_anon";
  const K_ORG = "pilotstay_org_id";

  // ---------- Load config ----------
  function getCfg() {
    return {
      url: localStorage.getItem(K_URL) || "",
      anon: localStorage.getItem(K_ANON) || "",
      org: localStorage.getItem(K_ORG) || ""
    };
  }

  function setCfg({url, anon, org}) {
    if (url !== undefined) localStorage.setItem(K_URL, url);
    if (anon !== undefined) localStorage.setItem(K_ANON, anon);
    if (org !== undefined) localStorage.setItem(K_ORG, org);
  }

  let supa = null;

  function ensureSupabase() {
    const cfg = getCfg();
    if (!cfg.url || !cfg.anon) {
      throw new Error("Missing SUPABASE_URL / SUPABASE_ANON_KEY. √ñffne Settings und trage sie ein.");
    }
    if (!supa || supa.__url !== cfg.url || supa.__anon !== cfg.anon) {
      supa = window.supabase.createClient(cfg.url, cfg.anon);
      supa.__url = cfg.url;
      supa.__anon = cfg.anon;
    }
    return supa;
  }

  // ---------- UI helpers ----------
  const qs = (s) => document.querySelector(s);
  const qsa = (s) => Array.from(document.querySelectorAll(s));

  function showView(name) {
    qsa(".view").forEach(v => v.style.display = "none");
    const el = qs("#view-" + name);
    if (el) el.style.display = "block";
    qsa(".nav-item").forEach(n => n.classList.toggle("active", n.dataset.view === name));

    const titles = {
      conversations: ["Conversations", "Inbox & Detail (api-dashboard)"],
      properties: ["Properties", "Raw JSON"],
      bookings: ["Bookings", "Raw JSON"],
      tutorial: ["Tutorial", "Wie du testest"],
      settings: ["Settings", "Supabase + Org"]
    };
    const t = titles[name] || ["Dashboard", ""];
    qs("#pageTitle").textContent = t[0];
    qs("#pageSubtitle").textContent = t[1];
  }

  function setAuthUI({userEmail, orgId}) {
    qs("#whoami").textContent = userEmail ? userEmail : "Nicht eingeloggt";
    qs("#orgLine").textContent = orgId ? ("org_id: " + orgId) : "";
  }

  // ---------- Auth overlay ----------
  function showAuthOverlay(msg) {
    qs("#authOverlay").style.display = "block";
    qs("#authStatus").textContent = msg || "";
    qs("#authError").style.display = "none";
    // prefill org
    qs("#authOrgId").value = getCfg().org || "";
  }

  function hideAuthOverlay() {
    qs("#authOverlay").style.display = "none";
  }

  async function login(email, password, orgIdOptional) {
    const sb = ensureSupabase();
    const btn = qs("#authLoginBtn");
    btn.disabled = true;
    qs("#authStatus").textContent = "Logging in...";
    try {
      const { data, error } = await sb.auth.signInWithPassword({ email, password });
      if (error) throw error;
      if (orgIdOptional) setCfg({ org: orgIdOptional });
      hideAuthOverlay();
      await boot();
    } catch (e) {
      qs("#authError").style.display = "block";
      qs("#authError").textContent = String(e?.message || e);
      qs("#authStatus").textContent = "";
    } finally {
      btn.disabled = false;
    }
  }

  async function logout() {
    try {
      const sb = ensureSupabase();
      await sb.auth.signOut();
    } catch (_) {}
    showAuthOverlay("Bitte einloggen");
  }

  // ---------- API calls (JWT) ----------
  function apiBase() {
    const sb = ensureSupabase();
    // Der Supabase client kennt die URL; Edge Functions h√§ngen unter /functions/v1
    return sb.__url + "/functions/v1/api-dashboard";
  }

  async function apiGet(path, params={}) {
    const sb = ensureSupabase();
    const cfg = getCfg();
    const { data: sess } = await sb.auth.getSession();
    const token = sess?.session?.access_token;
    if (!token) throw new Error("No session. Bitte neu einloggen.");

    const u = new URL(apiBase() + path);
    // org_id in jedem call mitsenden (Membership check)
    const orgId = cfg.org || "";
    if (orgId) u.searchParams.set("org_id", orgId);

    Object.entries(params || {}).forEach(([k,v]) => {
      if (v === null || v === undefined || v === "") return;
      u.searchParams.set(k, String(v));
    });

    const res = await fetch(u.toString(), {
      method: "GET",
      headers: {
        "authorization": "Bearer " + token,
        "accept": "application/json"
      }
    });
    const text = await res.text();
    let json;
    try { json = JSON.parse(text); } catch { json = { ok:false, raw:text }; }
    if (!res.ok || json?.ok === false) {
      const msg = json?.error || ("HTTP " + res.status);
      throw new Error(msg);
    }
    return json;
  }

  // ---------- Render ----------
  function renderConversations(items) {
    const host = qs("#convList");
    host.innerHTML = "";
    if (!items || items.length === 0) {
      host.innerHTML = '<div style="padding:16px; opacity:.75;">Keine Konversationen.</div>';
      return;
    }

    for (const it of items) {
      const div = document.createElement("div");
      div.style.padding = "14px 16px";
      div.style.borderBottom = "1px solid rgba(255,255,255,.06)";
      div.style.cursor = "pointer";

      const title = (it.property_name || "Property") + " ‚Ä¢ " + (it.guest_name || "Guest");
      const meta = (it.start_date || "‚Äî") + " ‚Üí " + (it.end_date || "‚Äî");
      const preview = it.last_message_preview ? it.last_message_preview : "‚Äî";
      const badge = it.reply_needed ? '<span style="margin-left:8px; font-size:11px; padding:2px 8px; border-radius:999px; background:rgba(255,80,80,.15); border:1px solid rgba(255,80,80,.25);">Reply</span>' : "";

      div.innerHTML = `
        <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
          <div style="font-weight:700;">${escapeHtml(title)} ${badge}</div>
          <div style="font-size:11px; opacity:.65;">#${it.smoobu_booking_id}</div>
        </div>
        <div style="font-size:12px; opacity:.7; margin-top:2px;">${escapeHtml(meta)}</div>
        <div style="font-size:12px; opacity:.9; margin-top:8px;">${escapeHtml(preview)}</div>
      `;

      div.addEventListener("click", () => loadConversationDetail(it.smoobu_booking_id));
      host.appendChild(div);
    }
  }

  function renderMessages(messages) {
    const host = qs("#messages");
    host.innerHTML = "";
    if (!messages || messages.length === 0) {
      host.innerHTML = '<div style="opacity:.75;">Keine Messages.</div>';
      return;
    }
    for (const m of messages) {
      const role = (m.sender_role || "unknown").toString();
      const bubble = document.createElement("div");
      bubble.style.padding = "12px";
      bubble.style.border = "1px solid rgba(255,255,255,.08)";
      bubble.style.borderRadius = "14px";
      bubble.style.background = role === "host" ? "rgba(80,160,255,.08)" : "rgba(255,255,255,.03)";
      bubble.innerHTML = `
        <div style="display:flex; justify-content:space-between; gap:10px; margin-bottom:6px;">
          <div style="font-weight:700; font-size:12px;">${escapeHtml(role)}</div>
          <div style="font-size:11px; opacity:.65;">${escapeHtml(m.sent_at_remote || "")}</div>
        </div>
        <div style="white-space:pre-wrap; font-size:13px; line-height:1.4;">${escapeHtml(m.body || m.message || "")}</div>
      `;
      host.appendChild(bubble);
    }
    host.scrollTop = host.scrollHeight;
  }

  function escapeHtml(s) {
    return (s ?? "").toString()
      .replaceAll("&", "&amp;")
      .replaceAll("<", "&lt;")
      .replaceAll(">", "&gt;")
      .replaceAll('"', "&quot;")
      .replaceAll("'", "&#039;");
  }

  // ---------- Data loaders ----------
  async function loadConversations() {
    const res = await apiGet("/conversations", {
      limit: 20,
      offset: 0,
      include: "messages_preview"
    });
    qs("#convMeta").textContent = `${res.page?.returned ?? 0} threads`;
    renderConversations(res.items || []);
  }

  async function loadConversationDetail(bookingId) {
    qs("#convDetailMeta").textContent = "Loading...";
    const res = await apiGet("/conversations/" + bookingId, {
      include: "messages",
      messages_limit: 200,
      messages_offset: 0
    });
    const title = `${res.property_name || "Property"} ‚Ä¢ #${res.smoobu_booking_id}`;
    const meta = `${res.guest_name || ""} ‚Ä¢ reply_needed=${res.reply_needed ? "true" : "false"}`;
    qs("#convDetailMeta").textContent = title + " ‚Äî " + meta;
    renderMessages(res.messages || []);
  }

  async function loadProperties() {
    const res = await apiGet("/properties", { limit: 5, offset: 0 });
    qs("#propertiesOut").textContent = JSON.stringify(res.items || [], null, 2);
  }

  async function loadBookings() {
    const res = await apiGet("/bookings", { limit: 5, offset: 0 });
    qs("#bookingsOut").textContent = JSON.stringify(res.items || [], null, 2);
  }

  // ---------- System Check (JWT) ----------
  async function systemCheck() {
    const out = [];
    try {
      out.push("‚úÖ /health");
      await apiGet("/health", { debug: 1 });
      out.push("‚úÖ /properties");
      await apiGet("/properties", { limit: 5 });
      out.push("‚úÖ /bookings");
      await apiGet("/bookings", { limit: 5 });
      out.push("‚úÖ /conversations");
      const conv = await apiGet("/conversations", { limit: 5, include: "messages_preview" });
      const first = (conv.items && conv.items[0]) ? conv.items[0].smoobu_booking_id : null;
      if (first) {
        out.push("‚úÖ /conversations/<built-in function id>");
        await apiGet("/conversations/" + first, { include: "messages", messages_limit: 20 });
      } else {
        out.push("‚ÑπÔ∏è no conversations to test detail");
      }
      qs("#settingsOut").textContent = out.join("\n") + "\n\n‚úÖ SYSTEMCHECK: ALL PASS";
    } catch (e) {
      qs("#settingsOut").textContent = out.join("\n") + "\n\n‚ùå FAIL: " + String(e?.message || e);
    }
  }

  // ---------- Boot ----------
  async function boot() {
    // Fill settings inputs
    const cfg = getCfg();
    qs("#setSupabaseUrl").value = cfg.url || "";
    qs("#setSupabaseAnon").value = cfg.anon || "";
    qs("#setOrgId").value = cfg.org || "";

    const sb = ensureSupabase();
    const { data: sess } = await sb.auth.getSession();
    const session = sess?.session;

    if (!session) {
      setAuthUI({userEmail:null, orgId: cfg.org || ""});
      showAuthOverlay("Bitte einloggen");
      return;
    }

    setAuthUI({userEmail: session.user?.email || session.user?.id, orgId: cfg.org || ""});

    // Default view
    showView("conversations");
    await loadConversations();
  }

  // ---------- Wire UI ----------
  qsa(".nav-item").forEach(el => {
    el.addEventListener("click", async () => {
      const v = el.dataset.view;
      showView(v);
      try {
        if (v === "conversations") await loadConversations();
        if (v === "properties") await loadProperties();
        if (v === "bookings") await loadBookings();
      } catch (e) {
        alert(String(e?.message || e));
      }
    });
  });

  qs("#refreshBtn").addEventListener("click", async () => {
    const active = qs(".nav-item.active")?.dataset.view || "conversations";
    try {
      if (active === "conversations") await loadConversations();
      if (active === "properties") await loadProperties();
      if (active === "bookings") await loadBookings();
    } catch (e) {
      alert(String(e?.message || e));
    }
  });

  qs("#logoutBtn").addEventListener("click", logout);

  qs("#authLoginBtn").addEventListener("click", () => {
    const email = qs("#authEmail").value.trim();
    const pass = qs("#authPassword").value;
    const org = qs("#authOrgId").value.trim();
    login(email, pass, org);
  });

  qs("#saveSettingsBtn").addEventListener("click", () => {
    const url = qs("#setSupabaseUrl").value.trim();
    const anon = qs("#setSupabaseAnon").value.trim();
    const org = qs("#setOrgId").value.trim();
    setCfg({url, anon, org});
    qs("#settingsOut").textContent = "Saved. Reload page.";
  });

  qs("#systemCheckBtn").addEventListener("click", systemCheck);

  // Auto-boot
  boot().catch(e => {
    console.error(e);
    qs("#settingsOut").textContent = "Boot error: " + String(e?.message || e);
    showView("settings");
  });
})();
</script>

</body>
</html>
